# 电商用户行为分析
## 一、分析背景和目的：
### 1、分析背景：
淘宝是中国最大的在线购物平台之一，拥有庞大的用户群体和海量的交易数据。随着电子商务的飞速发展，淘宝的用户数据成为了宝贵的资源，
对于淘宝及其商家来说，了解用户行为和消费习惯对于优化产品、服务和营销策略至关重要。淘宝用户数据分析是通过对用户行为数据的分析，
以揭示用户行为模式、购买偏好和潜在需求等，  为淘宝平台和商家提供决策支持和业务增长的重要参考。
### 2、分析目的：
淘宝用户数据分析的主要目的是深入了解用户行为和购买习惯，为淘宝平台和商家提供有针对性的数据洞察和战略指导，以优化运营和提高用户满意度。
## 二、分析框架和指标选取：
### 1、分析框架：
![数据分析框架](https://img-blog.csdnimg.cn/68c4b7c33c7e4096bab77006d5cf4af5.png#pic_center)
### 2、用户维度指标：
- pv：页面访问量
- uv：独立访客数
- 用户平均访问量：pv/uv
- 用户跳出率（只访问一次就离开的访问次数/pv）
- 用户活跃时间（用户行为随时间的变化情况）
### 3、产品维度指标：
- sku：商品类别数量
- 商品总量
### 4、用户行为维度指标：（用户漏斗模型）
- 用户行为转化率（收藏、加入购物车、成交）
- 复购率（时间段内购买一次以上的用户数/时间段内购买的总用户数）
- 人均购买次数（购买总次数/总用户数）
### 5、用户价值维度指标：（RFM模型）
- 用户最近一次购买时间
- 用户消费频率
## 三、分析步骤：
提出问题--理解数据--数据处理和清洗--数据分析--数据可视化
### 1、提出问题：
- 用户活跃的时间段？
- 用户对于对商品种类以及商品有哪些购买偏好？
- 用户各行为之间的转化情况？
- 用户的流失原因？
- 用户的价值分类，目前哪类用户占比较多？
### 2、理解数据：
- UserBehavior.csv
  
本数据集包含了2017年11月25日至2017年12月3日之间，有行为的约一百万随机用户的所有行为（行为包括点击、购买、加购、喜欢）。
数据集的组织形式和MovieLens-20M类似，即数据集的每一行表示一条用户行为，由用户ID、商品ID、商品类目ID、行为类型和时间戳组成，并以逗号分隔。
关于数据集中每一列的详细描述如下：
![字段解释](https://img-blog.csdnimg.cn/6d522e4c3c0d4b54a7a90097c8cd79d8.png#pic_center)
- 用户行为类型共有四种，它们分别是：
![用户行为类型](https://img-blog.csdnimg.cn/d2c0f0f73aad4932ad714dc148ab85f0.png#pic_center)
### 3、数据处理和清洗：
- **列名重命名**：
  
  为编写sql语句方便，将导入时将列名进行修改：
  |原字段名|字段重命名|
  |:--------:|:-------:|
  |用户ID|user_id|
  |商品ID|item_id|
  |商品类目ID|category|
  |行为类型|behavior|
  |时间戳|time|
- **导入数据展示**：
  
  ![初始导入数据](https://img-blog.csdnimg.cn/e5f74af04f6d4117bd67ca9270462363.png#pic_center)
  
  检查数据格式，发现time并非标准的时间格式，所以需要对其进行处理。
- **时间格式的处理**：
  1. 原时间戳time字段类型为整型，可以添加新字段，将其变成标准的日期格式，添加b_datetime(日期时间格式)、b_date(日期格式)、b_time(时间格式)：
     
    ![添加字段sql](https://img-blog.csdnimg.cn/a307fb8c78904be784b039037107a69a.png#pic_center)
     
  2. 给添加的字段更新前1000000行数据数据:(出于mysql性能考虑，本次数据分析只分析前1000000行记录)

    ![更新数据sql](https://img-blog.csdnimg.cn/c996c68e63cb497497012e4c7e1f7adb.png#pic_center)
  
  3. 删除1000000行后的数据：
 
    ![删除多余数据sql](https://img-blog.csdnimg.cn/dd090362233d4b8f9eed5a55b24a1d92.png#pic_center)

  4. 时间格式处理后的数据：

    ![全部时间总体数据](https://img-blog.csdnimg.cn/ef8a5518d4f44e36a6bf4dbbb12a946c.png#pic_center)

- **选取所需数据集**：
  1. 选取时间为2017年11月25日至2017年12月3日的数据部分：
     （可以创建视图，也可以直接删除不符合条件的部分，因本数据含有备份，本次采用后者方法）
     ![选取合适的数据集](https://img-blog.csdnimg.cn/81c33b26eb2c46a8b8004199bee97a3c.png#pic_center)
     
  2. 对处理完的数据进行检验：
     
     ![检验数据](https://img-blog.csdnimg.cn/e4727655e84341d9929e1111af6fb893.png#pic_center)
  
  3. 检查是否有缺失值：
    ![缺失值检查](https://img-blog.csdnimg.cn/4dcffb2a926b44f79eff610135be510c.png#pic_center)
     由上可知本次数据没有缺失值

  4. 检查是否有重复行：
     ![重复行检查sql](https://img-blog.csdnimg.cn/cd7425ebfa014575ae17f12ea2b2fd44.png#pic_center)
    
     由上可知本次数据没有重复行
### 4、数据分析及可视化：
#### 4.1 用户购物情况整体分析：
- UV(访客数)、PV(点击数)和用户平均访问量：
  ![sql](https://img-blog.csdnimg.cn/e682b493d65643c1b9adea562781ed1e.png#pic_center)
  由上可知，这段时间访客数为9739，点击数为895636，用户的平均访问量为91.96次，
  那么在这九天内用户大概每天人均访问9次左右，说明用户的粘性还是比较不错的，用户会经常访问网站或app
#### 4.2 用户活跃时间分析：
- 用户的行为随日期的变化情况：
  ![sql](https://img-blog.csdnimg.cn/ae2e1e6bf1584825a4a96a36c64fe967.png#pic_center)

  活跃点击量：
  ![可视化](https://img-blog.csdnimg.cn/6c411f32d1c843a6b6205dae6e96644c.png#pic_center)

  用户行为数据：
  ![可视化](https://img-blog.csdnimg.cn/9c05671606e546fd930c7bfd3290f5d6.png#pic_center)
  由上可知，用户的所有行为随日期变化呈现一致化的趋势，用户所有行为（点击、加入购车、收藏、购买）
  在12月2日和12月3日都有增加，其中点击量和加入购物车的行为在12月2日和12月3日有明显的的增加，这两天
  恰好是周六、周日，说明用户在周六、周日时购买欲望更高，运营可以在休息日时多做一些商品的推送和优化
- 用户的行为随时间的变化情况：
  ![sql](https://img-blog.csdnimg.cn/943144abee4e405f89f763c706b7ff83.png#pic_center)
  不同时段的访客数和活跃点击量：
  ![可视化](https://img-blog.csdnimg.cn/9f2f415985a24eeca9b3de51800e8e58.png#pic_center)
  通过上图可知：用户不同时段的访客数和活跃点击量变化趋势一致，其中在18-23时这个时间段用户比平常更加活跃，
  其中21-22时达到顶峰，说明用户更喜爱在晚上访问并浏览网站或app

  用户不同时段的收藏、加入购物车和购买情况：
  ![可视化](https://img-blog.csdnimg.cn/974dfbfc00c342f6b3d7dcdce5a40129.png#pic_center)
  由上可知，在18-22时购买情况呈明显的上升趋势，说明用户在晚上的购买欲望更高，这时用户有充足的的时间
  进行商品的挑选、加入购物车、收藏和购买，符合现代人们的作息，运营可以在晚间的时候进行商品的推送和
  活动宣传。
#### 4.3 用户的购买偏好：
- 销量前十的商品种类：
  
    ![sql](https://img-blog.csdnimg.cn/79b5526d289d4184b791a47984679226.png#pic_center)
  
    通过上图可知，商品种类为2735466销量最好
- 销量前十的商品：
  
    ![sql](https://img-blog.csdnimg.cn/47daf02926ff467da03a36d2ee7278de.png#pic_center)
  
    通过上图可知，销量最好的商品为3122135，所属种类为1516409
    针对热销的商品种类和商品进行更大规模的推广和优化，提高权重，当然还要分析销量好的商品种类其
    日常需求量和商品销售额来进行总和判断。
- 点击量前十的商品：
  
    ![sql](https://img-blog.csdnimg.cn/a87071925192421f9156c96ba27b60de.png#pic_center)
  
    由上可知，点击量最高的商品是812879，所属商品种类为4756105，说明该商品是当下的热门产品可以多推送与该商品同类型或者和该商品
    相关的商品，从而起到为其他商品引流的效果
- 收藏量前十的商品：
  
    ![sql](https://img-blog.csdnimg.cn/a87071925192421f9156c96ba27b60de.png#pic_center)
  
    针对高收藏量的商品可以进行适当的降价和活动促销，为活动引流，并且促进用户的消费欲望
- 人均购买次数：
  
    ![sql](https://img-blog.csdnimg.cn/b9436fce36784846b64f7f6e43398e17.png#pic_center)
  
    由上图可知，人们的消费能力还可以，人均购买次数在2次左右
- 复购率：
    1. 购买过两次及以上的用户数：
       
       ![在这里插入图片描述](https://img-blog.csdnimg.cn/1f6aadad3ab74576a3e10f6e1ad94da1.png#pic_center)
    2. 复购率：
       
       ``` 复购率=购买两次及以上的用户数/总购买用户数=4429/9739=45.48% ```
       
       可以看出复购率较高，说明大多数人在消费后还愿意再次消费
- 经常消费的重点客户：
  
    ![在这里插入图片描述](https://img-blog.csdnimg.cn/a3622979a6844a5ba12d05baec6f4ac2.png#pic_center)
  
    针对经常购买的用户的，需要重点关注，提高对于他们的服务质量，并且为他们制定合适的会员制度
#### 4.4 用户行为之间的转化情况：
- 用户行为次数统计：
  
  ![sql](https://img-blog.csdnimg.cn/3a1ecdf356534c89824c5dc13bfba0c5.png#pic_center)
  
  用户各行为之间转化情况：
  
  ![可视化](https://img-blog.csdnimg.cn/34bd2230a72f4bfa8306b0514ee5465d.png#pic_center)
  
  用户从点击到最终的购买环节的转化率为2.27%，在点击页面后用户流失很多。
- 用户购买路径：
  
  ![路径](https://img-blog.csdnimg.cn/8109e63a3a6d402bb680dd6121b5ed43.png#pic_center)
  1. 用户购买路径1：
     ![sql](https://img-blog.csdnimg.cn/c07a655984fc4be085fefa83c4ce48e1.png#pic_center)
     转化率分析：
     ![可视化](https://img-blog.csdnimg.cn/522cfdb992474ad6aea8e09f8de0dbd5.png#pic_center)
     由上图可知，用户在浏览商品后，大约18.3%的用户会进行收藏，收藏的用户中会有13.6%的用户进行
     购买
  2. 用户购买路径2：
     ![sql](https://img-blog.csdnimg.cn/f39e538a85b44b299dd5afc65e9a2730.png#pic_center)
     转化率分析：
     ![可视化](https://img-blog.csdnimg.cn/8026674c88db45cdb423caef54d53ce2.png#pic_center)
     由上可知，用户浏览商品后大概会有40.3%的用户会进行加入购物车，比收藏的用户高很多，加入购物车
     后只有18.1%的用户会进行购买，总的来看，用户在在路径2中的购买率更高，可适当引导用户将商品加入购物车
     增加用户的购买欲望，但是路径二的购买时的转化率仍然很低，推测可能有如下原因：
     
     - 加入购物车是为了和其他店铺商品进行比较
     - 为了凑满减
     - 等活动优惠
     - 过几天再买
### 5、业务问题解决：
##### 业务问题分析思路：（假设检验分析法）
![问题分析思路](https://img-blog.csdnimg.cn/b12e5d1b3f944208a45111cb0d64d04d.png#pic_center)
  - **提出问题**
  - 
     用户在点击后用户流失率较高，造成用户流失的原因是什么？
  - **提出假设**
    
    目前淘宝推送是根据用户的日常浏览数据，例如：日常搜索关键词，收藏和购买的商品，购买记录进行判断
    用户可能感兴趣的商品并根据相关产品进行推送。如果推送机制合理，那么推送的商品和用户的需求商品会高度
    匹配，从而最终的转化率也会变高，从而推送的商品的购买率也会增高，变成热销产品，反之用户流失严重。
    因此我们提出假设，平台推送的商品和用户需求不匹配，导致点击量高而购买率低的情况。
  - **收集证据**
    1. 统计各字段值的数量：
       
       ![sql](https://img-blog.csdnimg.cn/28867aaa5a614a7fb679e2745b17c6e7.png#pic_center)
       
       可见，数据集中的用户数有9739个，商品数有398971个，商品类别数有5793个，用户行为数量有4个。
       说明数据集中类别丰富，商品数量及种类充足。
    2. 商品的点击量前十的商品种类：
       ![sql](https://img-blog.csdnimg.cn/a3622979a6844a5ba12d05baec6f4ac2.png#pic_center)
       
       可视化如下：
       
       ![可视化](https://img-blog.csdnimg.cn/832e84079d5044c1b5d88aa29c658987.png#pic_center)
       
    3. 商品的点击量前十的商品：
       
       ![sql](https://img-blog.csdnimg.cn/a87071925192421f9156c96ba27b60de.png#pic_center)
       
       可视化如下：
       
       ![可视化](https://img-blog.csdnimg.cn/9111fbf512544b1c8f2da8e4db22bd5c.png#pic_center)
       
    4.点击量前十的商品的购买率：
    
       ![sql](https://img-blog.csdnimg.cn/a6bb7f64f50b43d1a38bcbd5758c1156.png#pic_center)
    
      对于热门商品的购买量可视化：
    
       ![可视化](https://img-blog.csdnimg.cn/2c9e4295b2e246b6ad4752a9800d954c.png#pic_center)
    
  - **得出结论**
    
      由上点击量和购买率以及相关可视化图表可知，点击量最高的商品812879购买量只有1，购买率只有0.35%，而点击量第七的商品1535294的购买率却
      有4.14%，说明假设成立，用户在浏览过程中，没有找到想要的产品，从而使用户实际购买的转化率降低，用户流失严重。
      
     ``` 当然分析只从点击率维度较为单一，还应考虑其他因素 ```
### 6、用户价值分类：（RFM模型）
    RFM模型是一种用于客户分析和用户细分的营销工具。它基于三个指标：Recency（最近购买时间）、Frequency（购买频率）和  
    Monetary（购买金额），用于衡量客户的价值和活跃程度。通过RFM模型，企业可以更好地了解客户的购买行为和价值，  并针  
    对不同群体采取个性化的营销策略。以下是RFM模型的三个指标：
    - Recency（最近购买时间）：衡量客户最近一次购买产品或服务的时间。通常使用客户最后一次交易距离当前的时间间隔来衡量
    - Frequency（购买频率）：衡量客户在一定时间内购买产品或服务的频率。通常使用一段时间内的交易次数来衡量
    - Monetary（购买金额）：衡量客户在一定时间内购买产品或服务的总金额。通常使用一段时间内的交易金额来衡量
    
  - 评估字段：
    1. R:用户最近一次购买时间到12月3日的时间差表示用户最近一次消费间隔
    2. F:用户在11月25日到12月3日之间购买次数表示用户的消费频率
    3. M:本次分析的数据当中没有相关消费金额的字段，在用户分层时不考虑购买金额
  - 用户打分规格：
    每个指标价值分为四档，价值有低到高分别赋1分、2分、3分、4分
    1. 查询用户消费次数的范围，便于更好的进行F值的划分：
       
       ![sql](https://img-blog.csdnimg.cn/88c1b405c6724c14b0569a5fc32be856.png#pic_center)
       
    2. 价值档位划分及打分规则制定：
       
       ![打分规则](https://img-blog.csdnimg.cn/c4daa5d7f5244e7abb4ef5d209a5f14e.png#pic_center)
       
    3. 最近一次购买间隔视图创建：
   
       ![最近一次购买间隔视图](https://img-blog.csdnimg.cn/d3aca62fb535481a94fa446aff37d291.png#pic_center)
       
    4. 计算R值：
    
       ![sql](https://img-blog.csdnimg.cn/a9e2af84281f403fa96f4c0511039630.png#pic_center)
       
    5. 计算R平均值：
   
       ![sql](https://img-blog.csdnimg.cn/fd87a5530962419f9a1ace69f996fd9d.png#pic_center)   
    6. 创建购买次数的视图：
     
       ![创建购买次数的视图](https://img-blog.csdnimg.cn/c99ad14ba0a24ff98bf23abe2b27322c.png#pic_center)
    7. 计算F值：
     
       ![sql](https://img-blog.csdnimg.cn/bdbd484d1b0345c395c6754b891b7982.png#pic_center)
    8. 计算F平均值：
     
        ![sql](https://img-blog.csdnimg.cn/e9796e3074f14f61918857fd6a78ea02.png#pic_center)  
    9. 创建视图，将RF合并：
     
        ![SQL](https://img-blog.csdnimg.cn/6deff8e248ee45a88ceed936416b283a.png#pic_center)
        
        创建的RF视图如下图：
        
        ![RF](https://img-blog.csdnimg.cn/fa73eaa2b80740859b6e06b65f184702.png#pic_center)
    10. 创建用户分类视图：
     
        ![sql](https://img-blog.csdnimg.cn/eec3755f28314bddb3457ffb0284fd0e.png#pic_center)
        
        创建的users_classification视图如下图：
        
        ![cu](https://img-blog.csdnimg.cn/3c192d9b5f2948fca264ec1de68a8c23.png#pic_center)
        
    11. 不同用户类别的数量：
    
        ![sql](https://img-blog.csdnimg.cn/8321fe8a3b4349db80555e18cf917605.png#pic_center)
        
        不同类别用户数量如下图：
        
        ![不同类别用户数量](https://img-blog.csdnimg.cn/992cedef632842a1923fe22646d2d067.png#pic_center)
    - 对于重要价值用户：
     1. 个性化推荐：根据重要价值用户的购买历史和偏好，向他们推荐相关性高的产品和服务，提高购买转化率和复购率。
     2. 专属优惠：向重要价值用户提供独有的折扣、优惠券或礼品，增强他们的忠诚度，鼓励再次购买。
     3. VIP服务：提供更快速、更优质的售后服务，让重要价值用户感受到尊贵和特殊待遇
    - 对于重要发展用户：
     1. 个性化引导：了解重要发展用户的兴趣和需求，通过个性化的引导和推荐，引导他们探索更多产品和服务。
     2. 专项活动：针对重要发展用户开展专门的促销活动或限时优惠，激励他们进行购买。
     3. 社群互动：鼓励重要发展用户参与社群活动，增加用户粘性和归属感。
    - 对于重要保持用户：
     1. 定期关怀：定期向重要保持用户发送问候、活动通知等短信或邮件，维持用户关注和兴趣。
     2. 用户调研：定期进行用户满意度调研，了解他们的需求和反馈，及时解决问题和改进服务。
     3. 增值服务：提供增值服务或增加附加值，让重要保持用户感受到额外的好处和体验。
    - 对于一般价值用户：
     1. 促销活动：针对一般价值用户开展促销活动，通过价格优惠等方式吸引他们购买。
     2. 购物引导：对一般价值用户进行购物引导，帮助他们更轻松地找到心仪的产品和优惠信息。
     3. 提升用户价值：通过精准推荐和增值服务，鼓励一般价值用户提升到更高价值的用户群体。
      
